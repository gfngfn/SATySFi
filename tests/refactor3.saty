
let inline ctx \math m = embed-math ctx (read-math ctx m) in

let math ctx \text it =
  embed-inline-to-math MathOrd (read-inline ctx it)
in

let math ctx \token s = read-math ctx ${\text!{#s;}} in

let math ctx \exprabsI x e =
  read-math ctx ${\token!{${A^{\token!{I}}}}#x.\token!{\ }#e}
in

let it = {${\exprabsI{x}{e}}} in

%let it = {A ${E = m c^2}} in

let ctx = get-initial-context 400pt (command \math) in
let paper-size = (210mm, 297mm) in %A4
let pagecontf _ = (| text-origin = (20pt, 20pt), text-height = 600pt, |) in
let pagepartsf _ = (| header-origin = (0pt, 0pt), header-content = block-nil, footer-origin = (0pt, 0pt), footer-content = block-nil, |) in
page-break paper-size pagecontf pagepartsf (line-break true true ctx ((read-inline ctx it) ++ inline-fil))
